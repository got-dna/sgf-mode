;;; sgf-parse-test.el --- tests -*- lexical-binding: t -*-

;; Author: Zech Xu
;; Version: version
;; Package-Requires: dependencies
;; Homepage: homepage
;; Keywords: keywords

;;; Code:

(ert-deftest sgf-parse-test ()
  (let ((obs (sgf-parse-file "test-13x15.sgf" 'sgf-parse-buffer))
        (exp [1
              ([2
                ([3 "FF" ([5 "4" 8]) 8] [8 "GM" ([10 "1" 13]) 13]
                 [13 "SZ" ([15 "13:15" 22]) 22]
                 [22 "AB" ([24 "ca" 28] [28 "bb" 32] [32 "db:eb" 39] [39 "cc" 43])
                     43]
                 [43 "AW" ([45 "da:ea" 52] [52 "fb" 56] [56 "dc:ec" 63]) 63]
                 [63 "PL" ([65 "W" 68]) 68] [68 "CA" ([70 "UTF-8" 77]) 77]
                 [77 "AP" ([79 "Sabaki:0.52.2" 94]) 94]
                 [94 "KM" ([96 "6.5" 101]) 101]
                 [101 "DT" ([103 "2024-09-19" 115]) 116])
                116]
               [116 ([117 "W" ([118 "ce" 122]) 122]) 122]
               [122 ([123 "B" ([124 "be" 128]) 129]) 129]
               ([129
                 ([131
                   ([133 "W" ([135 "cb" 141]) 142] [142 "SQ" ([144 "bb" 148]) 148]
                    [148 "TR" ([150 "db" 154] [154 "eb" 158]) 158]
                    [158 "LB" ([160 "fb:A" 166]) 166]
                    [166 "C" ([167 "comment@\\[foo\\]" 184]) 184]
                    [184 "MN" ([186 "15" 190]) 192])
                   192]
                  [192 ([193 "B" ([194 "db" 198]) 200]) 200]
                  [200 ([201 "W" ([202 "eb" 206]) 208]) 208]
                  [208 ([209 "B" ([210 "cb" 214]) 215]) 215])
                 216]
                [217 ([218 ([219 "W" ([220 "ba" 224]) 224]) 224]) 225]))
              227]

))
        (should (equal obs exp))))
